<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LAVA Safeco | Dashboard</title>
<link href="https://unpkg.com/lucide-static@latest/font/lucide.css" rel="stylesheet" />
<style>
  * {margin:0; padding:0; box-sizing:border-box; font-family:"Poppins", Arial, sans-serif;}
  body {background-color:#eef1f5;}

  /* NAVBAR */
  nav {
    background:#1b1f52;
    color:#fff;
    height:60px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 20px;
    position:fixed;
    top:0; left:0; right:0;
    z-index:100;
    box-shadow:0 2px 6px rgba(0,0,0,0.2);
  }
  .navbar-brand {
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:700;
    color:#fff;
    text-decoration:none;
  }
  .navbar-brand img {height:38px; border-radius:6px;}
  .nav-right {display:flex; align-items:center; gap:15px;}
  .btn {
    padding:8px 14px;
    border:none;
    border-radius:6px;
    font-weight:600;
    cursor:pointer;
    transition:background 0.2s, color 0.2s;
  }
  .btn-primary {background:#0d6efd; color:#fff;}
  .btn-primary:hover {background:#0b5ed7;}
  .btn-outline {background:transparent; color:#fff; border:2px solid #fff;}
  .btn-outline:hover {background:#fff; color:#1b1f52;}

  /* LAYOUT */
  .dashboard-wrapper {
    display:flex;
    height:100vh;
    margin-top:60px;
  }
  aside {
    background:#242a61;
    color:#fff;
    width:240px;
    display:flex;
    flex-direction:column;
    padding:20px 0;
  }
  aside a {
    color:#fff;
    text-decoration:none;
    padding:12px 20px;
    display:flex;
    align-items:center;
    gap:10px;
    transition:background 0.2s;
    font-size:14px;
  }
  aside a:hover {background:#1b1f52;}
  main {
    flex:1;
    padding:25px;
    overflow-y:auto;
    background:#eef1f5;
  }

  /* CARDS */
  .card {
    background:#fff;
    border-radius:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.1);
    padding:16px;
    margin-bottom:20px;
  }
  .card h3 {color:#0d6efd; font-size:16px; margin-bottom:10px;}
  .card p, .card li {font-size:13px; color:#555;}

  /* WELCOME */
  .welcome {
    display:flex;
    align-items:center;
    gap:15px;
    margin-bottom:20px;
  }
  .welcome img {height:60px; border-radius:6px;}
  .welcome h2 {color:#1b1f52; font-weight:600;}

  .cards-row {
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(220px,1fr));
    gap:20px;
  }

  /* TABLE */
  .recent-quotes table {
    width:100%;
    border-collapse:collapse;
    font-size:14px;
  }
  th, td {
    padding:10px;
    border-bottom:1px solid #ddd;
    text-align:left;
  }
  th {background:#f0f2f5; font-weight:600;}
  tr:hover {background:#f9fbff;}
  .text-muted {color:#888; font-size:13px; text-align:center;}

  /* ALERT */
  .alert {
    position:fixed; top:20px; right:20px;
    background:#d4edda; color:#155724;
    border:1px solid #c3e6cb;
    padding:10px 16px;
    border-radius:8px;
    display:none;
    box-shadow:0 3px 10px rgba(0,0,0,0.15);
    z-index:200;
  }
  .alert.error {background:#f8d7da; color:#721c24; border-color:#f5c6cb;}

  /* LOGIN */
  #loginContainer {
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    background:#f4f7f6;
  }
  #loginForm {
    background:#fff;
    padding:30px;
    border-radius:10px;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
    width:300px;
    display:flex;
    flex-direction:column;
    gap:15px;
  }
  .form-input, .form-select {
    width:100%; padding:8px;
    border:1px solid #ccc;
    border-radius:6px;
    font-size:14px;
  }

  @media(max-width:900px){
    .dashboard-wrapper {flex-direction:column;}
    aside {width:100%; flex-direction:row; overflow-x:auto;}
    aside a {justify-content:center; flex:1;}
  }
</style>
</head>
<body>

<!-- LOGIN FORM -->
<div id="loginContainer">
  <form id="loginForm">
    <h2 style="color:#0d6efd;text-align:center;">Agent Login</h2>
    <input type="text" id="firstName" placeholder="First Name" class="form-input" required>
    <input type="text" id="lastName" placeholder="Last Name" class="form-input" required>
    <input type="password" id="password" placeholder="Password" class="form-input" required>
    <button type="submit" class="btn btn-primary">Login</button>
  </form>
</div>

<!-- DASHBOARD -->
<div id="dashboardContainer" style="display:none;">
  <!-- NAVBAR -->
  <nav>
    <a href="#" class="navbar-brand"><img src="images/lava-safeco-logo.png" /> LAVA Safeco</a>
    <div class="nav-right">
      <button class="btn btn-outline" onclick="startQuote()">Start Quote</button>
      <span id="agent-display" style="font-size:13px;"></span>
      <a href="#" style="color:#fff;font-weight:600;text-decoration:none;" onclick="logout()">Logout</a>
    </div>
  </nav>

  <div class="dashboard-wrapper">
    <!-- SIDEBAR -->
    <aside>
      <a href="#"><i class="lucide-search"></i> Lookup</a>
      <a href="#"><i class="lucide-settings"></i> Tools</a>
      <a href="#"><i class="lucide-file-text"></i> Reports</a>
      <a href="#"><i class="lucide-users"></i> Contacts</a>
      <a href="#"><i class="lucide-bell"></i> Alerts</a>
    </aside>

    <!-- MAIN CONTENT -->
    <main>
      <div class="welcome">
        <img src="images/lava-safeco-logo.png" />
        <h2 id="welcome-agent-msg"></h2>
      </div>

      <div class="cards-row">
        <div class="card">
          <h3>Renewals</h3>
          <p id="renewals">No renewals right now.</p>
        </div>
        <div class="card">
          <h3>My Favorites</h3>
          <ul style="padding-left:15px;list-style-type:disc;">
            <li>Client list</li>
            <li>View policy summary</li>
            <li>Change or endorse</li>
            <li>Manage billing & payments</li>
          </ul>
        </div>
        <div class="card">
          <h3>My Production</h3>
          <p id="production">Auto Issues YTD: 0<br>Home Issues YTD: 0</p>
        </div>
        <div class="card">
          <h3>My Insights</h3>
          <p>85% of customers say itâ€™s important to review policy coverages.</p>
        </div>
      </div>

      <div class="card recent-quotes">
        <h3>Recent Quotes</h3>
        <table>
          <thead>
            <tr>
              <th>Quote #</th>
              <th>Client Name</th>
              <th>Type</th>
              <th>Premium</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody id="recentQuotesBody">
            <tr><td colspan="5" class="text-muted">No recent quotes available.</td></tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>
</div>

<div class="alert" id="alertBox"></div>

<script>
const QUOTES_KEY = "quotes";

function seedDummyQuotes() {
  const dummyQuotes = [
    { quoteNumber: "Q-10231", applicantName: "Michael Rivera", productType: "Auto", estimatedPremium: 1243.25, createdAt: Date.now() - 86400000 * 1 },
    { quoteNumber: "Q-10232", applicantName: "Jessica Tan", productType: "Home", estimatedPremium: 982.60, createdAt: Date.now() - 86400000 * 2 },
    { quoteNumber: "Q-10233", applicantName: "Daniel Cruz", productType: "Auto", estimatedPremium: 1375.90, createdAt: Date.now() - 86400000 * 3 },
    { quoteNumber: "Q-10234", applicantName: "Amanda Li", productType: "Home", estimatedPremium: 1150.40, createdAt: Date.now() - 86400000 * 4 },
    { quoteNumber: "Q-10235", applicantName: "Sofia Reyes", productType: "Auto", estimatedPremium: 1209.00, createdAt: Date.now() - 86400000 * 5 },
    { quoteNumber: "Q-10236", applicantName: "George Smith", productType: "Home", estimatedPremium: 990.75, createdAt: Date.now() - 86400000 * 6 },
    { quoteNumber: "Q-10237", applicantName: "Emily Santos", productType: "Auto", estimatedPremium: 1320.55, createdAt: Date.now() - 86400000 * 7 },
    { quoteNumber: "Q-10238", applicantName: "Carlos Mendoza", productType: "Home", estimatedPremium: 1085.30, createdAt: Date.now() - 86400000 * 8 },
    { quoteNumber: "Q-10239", applicantName: "Hannah Lopez", productType: "Auto", estimatedPremium: 1279.80, createdAt: Date.now() - 86400000 * 9 },
    { quoteNumber: "Q-10240", applicantName: "John Perez", productType: "Home", estimatedPremium: 1015.10, createdAt: Date.now() - 86400000 * 10 }
  ];
  localStorage.setItem(QUOTES_KEY, JSON.stringify(dummyQuotes));
}

function showAlert(type, message) {
  const box = document.getElementById("alertBox");
  box.textContent = message;
  box.className = "alert" + (type === "error" ? " error" : "");
  box.style.display = "block";
  setTimeout(() => (box.style.display = "none"), 3000);
}

// NEW Start Quote: Direct routes to Auto or Home
function startQuote() {
  const choice = confirm("Click OK for Auto Quote or Cancel for Home Quote.");
  if (choice) {
    window.location.href = "https://zesty-blini-7bc3a7.netlify.app/quote.html?type=auto";
  } else {
    window.location.href = "https://zesty-blini-7bc3a7.netlify.app/quote.html?type=home";
  }
}

function logout() {
  showAlert("success", "You have been logged out.");
  document.getElementById("dashboardContainer").style.display = "none";
  document.getElementById("loginContainer").style.display = "flex";
}

function loadRecentQuotes() {
  let quotes = JSON.parse(localStorage.getItem(QUOTES_KEY));
  if (!quotes || quotes.length === 0) {
    seedDummyQuotes();
    quotes = JSON.parse(localStorage.getItem(QUOTES_KEY));
  }
  const tbody = document.getElementById("recentQuotesBody");
  tbody.innerHTML = "";
  quotes.sort((a, b) => b.createdAt - a.createdAt);
  quotes.forEach((q) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${q.quoteNumber}</td>
      <td>${q.applicantName}</td>
      <td>${q.productType}</td>
      <td>$${q.estimatedPremium.toFixed(2)}</td>
      <td>${new Date(q.createdAt).toLocaleDateString()}</td>
    `;
    tbody.appendChild(row);
  });
}

document.getElementById("loginForm").addEventListener("submit", function (e) {
  e.preventDefault();
  const first = document.getElementById("firstName").value.trim();
  const last = document.getElementById("lastName").value.trim();
  const password = document.getElementById("password").value;
  if (first && last && password) {
    sessionStorage.setItem("agentFirstName", first);
    sessionStorage.setItem("agentLastName", last);
    document.getElementById("loginContainer").style.display = "none";
    document.getElementById("dashboardContainer").style.display = "block";
    const fullName = first + " " + last;
    document.getElementById("welcome-agent-msg").textContent = `Hi ${fullName}!`;
    document.getElementById("agent-display").textContent = `User ID: ${fullName}`;
    loadRecentQuotes();
  } else {
    showAlert("error", "Please fill all login fields.");
  }
});

document.addEventListener("DOMContentLoaded", () => {
  const first = sessionStorage.getItem("agentFirstName");
  const last = sessionStorage.getItem("agentLastName");
  if (first && last) {
    document.getElementById("loginContainer").style.display = "none";
    document.getElementById("dashboardContainer").style.display = "block";
    const fullName = first + " " + last;
    document.getElementById("welcome-agent-msg").textContent = `Hi ${fullName}!`;
    document.getElementById("agent-display").textContent = `User ID: ${fullName}`;
  }
  loadRecentQuotes();
});
</script>
</body>
</html>

